{% extends 'home/base.html' %}
{% load static %}

{% block content %}

    <header>        
        <div id="logo">To Do List</div>
    </header>

    <main>

         <div id="shift_menu">

            <i id="menu_icon" class="fa-solid fa-sliders fa-lg" ></i>

            <div id="show_user" >
                Login
            </div>

        </div> 

        <ul id="menu_box">
            <div id="small_logo">
                <i id="menu_box_close" class="fa-regular fa-circle-xmark" ></i>
                To Do List
            </div>
            <li id="menu_profile_btn">
                <a href="#">
                    <i class="fa-solid fa-user"></i>
                    Profile
                </a>
            </li>
            <li id="menu_tasks_btn">
                <a href="#">
                    <i class="fa-solid fa-list-check"></i>
                    Tasks
                </a>
            </li>
            <li id="menu_settings_btn">
                <a href="#">
                    <i class="fa-solid fa-gears"></i>
                    Settings
                </a>
            </li>
            <li id="menu_logout_btn">
                <a href="#">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    LogOut
                </a>
            </li>
        </ul>

        <div id="signin_box">
            <h2>Sign-in</h2>
            <button id="login_btn">LOGIN</button>
            <button id="register_btn">REGISTER</button>
        </div>
        
        <div id="login_box">
            
            <i id="login_box_close" class="fa-solid fa-circle-xmark"></i>                
            <h2 id="login_title">Login</h2>
            <form action="" method="post" id="login_form">
                {% csrf_token %}
                {% for form_field in login_form %}

                    <div class="input_group_box">
                        <div class="input_group">
                            <i class="fa-solid fa-{{form_field.field.icon}}"></i>
                            {{form_field}}
                        </div>
                    </div>
                    
                {% endfor %}
                <button id="login_submit" type="submit">Submit</button>

            </form>
            <p id="register_login">Create <span id="register_login_btn">Account</span></p>
            
        </div> 
        
        <div id="register_box">
            
            <i id="register_box_close" class="fa-solid fa-circle-xmark"></i>                
            <h2 id="register_title">Register</h2>
            <form action="" method="post" id="form_register">
                {% csrf_token %}
                {% for form_field in register_form %}
                {% if form_field.name != "user_phone_number" %}
                    <div class="input_group_box">
                        <label for="id_{{form_field.name}}">{{form_field.label}}</label>
                        <div class="input_group">
                            <i class="fa-solid fa-{{form_field.field.icon}}"></i>
                            {{form_field}}
                        </div>
                    </div>
                {% else %}
                    <div class="input_group_box">
                        <label for="id_{{form_field.name}}_1">{{form_field.label}}</label>
                        <div class="input_group">
                            <i class="fa-solid fa-{{form_field.field.icon}}"></i>
                            {{form_field}}
                        </div>
                    </div>
                
                {% endif %}                
                {% endfor %}

                <div class="input_group_box">
                    <label for="id_user_con_password">CONFIRM PASSWORD</label>
                    <div class="input_group">
                        <i class="fa-solid fa-key"></i>
                        <input type="password" name="user_con_password" id="id_user_con_password" placeholder="Confirm Password" required>
                    </div>
                </div>
                <button id="register_submit" type="submit">Submit</button>

            </form>
            <p id="login_register">Already registered <span id='login_register_btn' >Login</span></p>

        </div>

        {% if registered_success %}
            <div id="registered_success_box">
                {{ registered_success }}
                <button id="registered_success_box_close_btn">OK</button>

            </div>
        {% endif %}

        {% if registered_failed %}
            <div id="registered_failed_box">
                {{ registered_failed }}
                <button id="registered_failed_box_close_btn">OK</button>

            </div>
        {% endif %}

        {% if login_success %}
            <div id="login_success_box">
                {{ login_success }}
                <form action="{% url 'user' logged_user_id %}">
                    <button id="login_success_box_close_btn" type="submit">OK</button>
                </form>
            </div>
        {% endif %}

        {% if login_failed %}
            <div id="login_failed_box">
                {{ login_failed }}
                <button id="login_failed_box_close_btn">OK</button>

            </div>
        {% endif %}
        
    </main>

    <footer>
        <script type="text/javascript" src="{% static 'home/js/home.js' %}"></script>
    </footer>
{% endblock %}

        